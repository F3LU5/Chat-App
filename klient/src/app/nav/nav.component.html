<div class="sidebar" [class.open]="isSidebarOpen">
  <div class="container">
    <button class="menu-btn" (click)="toggleSidebar()" [class.open]="isSidebarOpen">☰</button>
    
    <ul class="navbar-nav">
      @if (accountService.currentUser()){
      <li class="nav-item">
        <a routerLink="/members" routerLinkActive="active" class="nav-link">Użytkownicy</a>
      </li>
      <li class="nav-item">
        <a routerLink="/wiadomosci" routerLinkActive="active" class="nav-link">Wiadomości</a>
      </li>
      <li *appHasrole="['Admin', 'Moderator']" class="nav-item">
        <a routerLink="/admin" routerLinkActive="active" class="nav-link">Admin</a>
      </li>
      }
    </ul>

    @if (accountService.currentUser()){
      <div dropdown class="dropdown">
        <img class="me-2" src="{{accountService.currentUser()?.imageUrl || './assets/user.png'}}" alt="Avatar użytkownika" class="user-avatar">
        <a dropdownToggle class="dropdown-toggle text-light text-decoration-none">Witaj {{accountService.currentUser()?.username | titlecase}}</a>
        <div *dropdownMenu class="dropdown-menu">
          <a routerLink="/znajomy/edit" class="dropdown-item">Edytuj Profil</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" (click)="logout()">Wyloguj</a>
        </div>
      </div>
    }

    @if (!accountService.currentUser()){
      <form #FormularzLogowania="ngForm" (ngSubmit)="login()" class="d-flex flex-column formularz-logowania" autocomplete="off">
        <input name="nazwauzytkownika" [(ngModel)]="model.username" class="form-control mb-2" type="text" placeholder="Nazwa Użytkownika">
        <input name="haslo" [(ngModel)]="model.password" class="form-control mb-2" type="password" placeholder="Hasło">
        <button class="btn btn-outline-success" type="submit">Zaloguj</button>
      </form>
    }
  </div>
</div>
